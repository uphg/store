<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>轻松学会 React 钩子：以 useEffect() 为例 | Store Note</title>
    <meta name="generator" content="VuePress 1.7.1">
    <link href="https://fonts.googleapis.com/css?family=Inter:300,400,500,600|Open+Sans:400,600;display=swap" rel="stylesheet">
    <script src="/store/icon/svg.js"></script>
    <meta name="description" content="分享/转载，我收集的一些前端的博客、教程等（内容大部分为转载）。">
    
    <link rel="preload" href="/store/assets/css/0.styles.63d1068c.css" as="style"><link rel="preload" href="/store/assets/js/app.394edd4d.js" as="script"><link rel="preload" href="/store/assets/js/2.47c138cf.js" as="script"><link rel="preload" href="/store/assets/js/9.2072f0c5.js" as="script"><link rel="prefetch" href="/store/assets/js/10.5991f066.js"><link rel="prefetch" href="/store/assets/js/11.b720c46d.js"><link rel="prefetch" href="/store/assets/js/12.732d7e14.js"><link rel="prefetch" href="/store/assets/js/13.36b70fac.js"><link rel="prefetch" href="/store/assets/js/14.05183c62.js"><link rel="prefetch" href="/store/assets/js/15.7c5b5bdc.js"><link rel="prefetch" href="/store/assets/js/16.209846e1.js"><link rel="prefetch" href="/store/assets/js/17.a5ebad70.js"><link rel="prefetch" href="/store/assets/js/18.1be799ce.js"><link rel="prefetch" href="/store/assets/js/19.b34fb98d.js"><link rel="prefetch" href="/store/assets/js/20.09a1eaf3.js"><link rel="prefetch" href="/store/assets/js/21.b3963c90.js"><link rel="prefetch" href="/store/assets/js/22.ec97312d.js"><link rel="prefetch" href="/store/assets/js/23.a163377b.js"><link rel="prefetch" href="/store/assets/js/24.6275c188.js"><link rel="prefetch" href="/store/assets/js/25.cbc926dd.js"><link rel="prefetch" href="/store/assets/js/26.86c46bec.js"><link rel="prefetch" href="/store/assets/js/27.3d81ab36.js"><link rel="prefetch" href="/store/assets/js/28.8fb3867a.js"><link rel="prefetch" href="/store/assets/js/29.a066a763.js"><link rel="prefetch" href="/store/assets/js/3.66aba1d2.js"><link rel="prefetch" href="/store/assets/js/30.c50eb8b0.js"><link rel="prefetch" href="/store/assets/js/4.68e87ae4.js"><link rel="prefetch" href="/store/assets/js/5.a95fabbf.js"><link rel="prefetch" href="/store/assets/js/6.1bf59d34.js"><link rel="prefetch" href="/store/assets/js/7.bc383402.js"><link rel="prefetch" href="/store/assets/js/8.74ff4d35.js">
    <link rel="stylesheet" href="/store/assets/css/0.styles.63d1068c.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/store/" class="home-link router-link-active"><!----> <span class="site-name">Store Note</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----> <svg aria-hidden="true" class="icon search-icon"><use xlink:href="#icon-search"></use></svg></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/store/bookmarks/" class="nav-link">
  收藏夹
</a></div><div class="nav-item"><a href="/store/js/" class="nav-link">
  JavaScript
</a></div><div class="nav-item"><a href="/store/devbook/" class="nav-link">
  开发者手册
</a></div><div class="nav-item"><a href="/store/react/" class="nav-link router-link-active">
  React 教程
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><div class="el-scrollbar"><div class="scrollbar-wrapper el-scrollbar__wrap el-scrollbar__wrap--hidden-default"><div class="el-scrollbar__view"><nav class="nav-links"><div class="nav-item"><a href="/store/bookmarks/" class="nav-link">
  收藏夹
</a></div><div class="nav-item"><a href="/store/js/" class="nav-link">
  JavaScript
</a></div><div class="nav-item"><a href="/store/devbook/" class="nav-link">
  开发者手册
</a></div><div class="nav-item"><a href="/store/react/" class="nav-link router-link-active">
  React 教程
</a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/store/react/" aria-current="page" class="sidebar-link">介绍</a></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>React 入门教程</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/store/react/react-technology-stack.html" class="sidebar-link">React 技术栈系列教程</a></li><li><a href="/store/react/react-started.html" class="sidebar-link">React 入门实例教程（旧）</a></li><li><a href="/store/react/react-hooks.html" class="sidebar-link">React Hooks 入门教程</a></li><li><a href="/store/react/react-hooks-useeffect.html" aria-current="page" class="active sidebar-link">轻松学会 React 钩子：以 useEffect() 为例</a></li><li><a href="/store/react/react-router.html" class="sidebar-link">React Router 使用教程</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Redux 入门教程</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/store/react/redux/redux-part-basic.html" class="sidebar-link">一、基本用法</a></li><li><a href="/store/react/redux/redux-part-async-operations.html" class="sidebar-link">二、中间件与异步操作</a></li><li><a href="/store/react/redux/redux-part-react.html" class="sidebar-link">三、React-Redux 的用法</a></li></ul></section></li></ul> </div></div><div class="el-scrollbar__bar is-horizontal"><div class="el-scrollbar__thumb" style="width:0;transform:translateX(0%);ms-transform:translateX(0%);webkit-transform:translateX(0%);"></div></div><div class="el-scrollbar__bar is-vertical"><div class="el-scrollbar__thumb" style="height:0;transform:translateY(0%);ms-transform:translateY(0%);webkit-transform:translateY(0%);"></div></div></div></aside> <main class="page"> <div class="re-page-top"><h1 class="title"><span>轻松学会 React 钩子：以 useEffect() 为例</span></h1> <div class="re-page-index"><div class="page-index-title"><span class="open-catalog"><svg aria-hidden="true" class="icon arrow-right"><use xlink:href="#icon-bold-right"></use></svg> <span class="text">目录</span></span></div> <div class="page-index-content"><div class="page-catalog" style="display:none;"><div><ul><li><a href="/store/react/react-hooks-useeffect.html#一、react-的两套-api">一、React 的两套 API</a></li><li><a href="/store/react/react-hooks-useeffect.html#二、类和函数的差异">二、类和函数的差异</a></li><li><a href="/store/react/react-hooks-useeffect.html#三、副效应是什么">三、副效应是什么？</a></li><li><a href="/store/react/react-hooks-useeffect.html#四、钩子-hook-的作用">四、钩子（hook）的作用</a></li><li><a href="/store/react/react-hooks-useeffect.html#五、useeffect-的用法">五、useEffect() 的用法</a></li><li><a href="/store/react/react-hooks-useeffect.html#六、useeffect-的第二个参数">六、useEffect() 的第二个参数</a></li><li><a href="/store/react/react-hooks-useeffect.html#七、useeffect-的用途">七、useEffect() 的用途</a></li><li><a href="/store/react/react-hooks-useeffect.html#八、useeffect-的返回值">八、useEffect() 的返回值</a></li><li><a href="/store/react/react-hooks-useeffect.html#九、useeffect-的注意点">九、useEffect() 的注意点</a></li><li><a href="/store/react/react-hooks-useeffect.html#十、参考链接">十、参考链接</a></li></ul></div></div></div></div></div> <div class="theme-default-content content__default" data-v-2eb9f374 data-v-2eb9f374><hr data-v-2eb9f374> <p data-v-2eb9f374>作者： <a href="http://www.ruanyifeng.com/" target="_blank" rel="noopener noreferrer" data-v-2eb9f374>阮一峰<span data-v-2eb9f374><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p data-v-2eb9f374>日期： <a href="http://www.ruanyifeng.com/blog/2020/09/" target="_blank" rel="noopener noreferrer" data-v-2eb9f374>2020年9月15日<span data-v-2eb9f374><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <hr data-v-2eb9f374> <p data-v-2eb9f374>五年多前，我写过 <a href="http://www.ruanyifeng.com/blog/2016/09/react-technology-stack.html" target="_blank" rel="noopener noreferrer" data-v-2eb9f374>React 系列教程<span data-v-2eb9f374><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。不用说，内容已经有些过时了。</p> <p data-v-2eb9f374>我本来不想碰它们了，觉得框架一直在升级，教程写出来就会过时。</p> <p data-v-2eb9f374>但是，最近我逐渐体会到 React 钩子（hooks）非常好用，重新认识了 React 这个框架，觉得应该补上关于钩子的部分。</p> <p data-v-2eb9f374>下面就来谈谈，怎样正确理解钩子，并且深入剖析最重要的钩子之一的<code data-v-2eb9f374>useEffect()</code>。内容会尽量通俗，让不熟悉 React 的朋友也能看懂。欢迎大家参考我以前写的<a href="http://www.ruanyifeng.com/blog/2015/03/react.html" target="_blank" rel="noopener noreferrer" data-v-2eb9f374>《React 框架入门》<span data-v-2eb9f374><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>和<a href="http://www.ruanyifeng.com/blog/2019/09/react-hooks.html" target="_blank" rel="noopener noreferrer" data-v-2eb9f374>《React 最常用的四个钩子》<span data-v-2eb9f374><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</p> <h2 id="一、react-的两套-api" data-v-2eb9f374><a href="#一、react-的两套-api" class="header-anchor" data-v-2eb9f374>#</a> 一、React 的两套 API</h2> <p data-v-2eb9f374>以前，React API 只有一套，现在有两套：类（class）API 和基于函数的钩子（hooks） API。</p> <div class="react-hooks-useeffect_function-vs-class" data-v-2eb9f374><div class="react-hooks-useeffect_function-vs-class_title" data-v-2eb9f374>React JS</div> <div class="react-hooks-useeffect_function-vs-class_content" data-v-2eb9f374><p class="react-hooks-useeffect_p" data-v-2eb9f374>Function Component</p> <p class="react-hooks-useeffect_p" data-v-2eb9f374>vs</p> <p class="react-hooks-useeffect_p" data-v-2eb9f374>Class Component</p></div></div> <p data-v-2eb9f374>任何一个组件，可以用类来写，也可以用钩子来写。下面是类的写法。</p> <div class="language-jsx extra-class" data-v-2eb9f374><pre class="language-jsx" data-v-2eb9f374><code data-v-2eb9f374><span class="token keyword" data-v-2eb9f374>class</span> <span class="token class-name" data-v-2eb9f374>Welcome</span> <span class="token keyword" data-v-2eb9f374>extends</span> <span class="token class-name" data-v-2eb9f374>React<span class="token punctuation" data-v-2eb9f374>.</span>Component</span> <span class="token punctuation" data-v-2eb9f374>{</span>
  <span class="token function" data-v-2eb9f374>render</span><span class="token punctuation" data-v-2eb9f374>(</span><span class="token punctuation" data-v-2eb9f374>)</span> <span class="token punctuation" data-v-2eb9f374>{</span>
    <span class="token keyword" data-v-2eb9f374>return</span> <span class="token tag" data-v-2eb9f374><span class="token tag" data-v-2eb9f374><span class="token punctuation" data-v-2eb9f374>&lt;</span>h1</span><span class="token punctuation" data-v-2eb9f374>&gt;</span></span><span class="token plain-text" data-v-2eb9f374>Hello, </span><span class="token punctuation" data-v-2eb9f374>{</span><span class="token keyword" data-v-2eb9f374>this</span><span class="token punctuation" data-v-2eb9f374>.</span>props<span class="token punctuation" data-v-2eb9f374>.</span>name<span class="token punctuation" data-v-2eb9f374>}</span><span class="token tag" data-v-2eb9f374><span class="token tag" data-v-2eb9f374><span class="token punctuation" data-v-2eb9f374>&lt;/</span>h1</span><span class="token punctuation" data-v-2eb9f374>&gt;</span></span><span class="token punctuation" data-v-2eb9f374>;</span>
  <span class="token punctuation" data-v-2eb9f374>}</span>
<span class="token punctuation" data-v-2eb9f374>}</span>
</code></pre></div><p data-v-2eb9f374>再来看钩子的写法，也就是函数。</p> <div class="language-jsx extra-class" data-v-2eb9f374><pre class="language-jsx" data-v-2eb9f374><code data-v-2eb9f374><span class="token keyword" data-v-2eb9f374>function</span> <span class="token function" data-v-2eb9f374>Welcome</span><span class="token punctuation" data-v-2eb9f374>(</span><span class="token parameter" data-v-2eb9f374>props</span><span class="token punctuation" data-v-2eb9f374>)</span> <span class="token punctuation" data-v-2eb9f374>{</span>
  <span class="token keyword" data-v-2eb9f374>return</span> <span class="token tag" data-v-2eb9f374><span class="token tag" data-v-2eb9f374><span class="token punctuation" data-v-2eb9f374>&lt;</span>h1</span><span class="token punctuation" data-v-2eb9f374>&gt;</span></span><span class="token plain-text" data-v-2eb9f374>Hello, </span><span class="token punctuation" data-v-2eb9f374>{</span>props<span class="token punctuation" data-v-2eb9f374>.</span>name<span class="token punctuation" data-v-2eb9f374>}</span><span class="token tag" data-v-2eb9f374><span class="token tag" data-v-2eb9f374><span class="token punctuation" data-v-2eb9f374>&lt;/</span>h1</span><span class="token punctuation" data-v-2eb9f374>&gt;</span></span><span class="token punctuation" data-v-2eb9f374>;</span>
<span class="token punctuation" data-v-2eb9f374>}</span>
</code></pre></div><p data-v-2eb9f374>这两种写法，作用完全一样。初学者自然会问：&quot;我应该使用哪一套 API？&quot;</p> <p data-v-2eb9f374>官方<a href="https://reactjs.org/docs/hooks-faq.html#should-i-use-hooks-classes-or-a-mix-of-both" target="_blank" rel="noopener noreferrer" data-v-2eb9f374>推荐<span data-v-2eb9f374><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>使用钩子（函数），而不是类。因为钩子更简洁，代码量少，用起来比较&quot;轻&quot;，而类比较&quot;重&quot;。而且，钩子是函数，更符合 React 函数式的本质。</p> <p data-v-2eb9f374>下面是类组件（左边）和函数组件（右边）代码量的比较。对于复杂的组件，差的就更多。</p> <div class="react-hooks-useeffect_code" data-v-2eb9f374><div class="react-hooks-useeffect_code-container" data-v-2eb9f374><div class="language-jsx extra-class" data-v-2eb9f374><pre class="language-jsx" data-v-2eb9f374><code data-v-2eb9f374><span class="token keyword" data-v-2eb9f374>import</span> React<span class="token punctuation" data-v-2eb9f374>,</span> <span class="token punctuation" data-v-2eb9f374>{</span> Component <span class="token punctuation" data-v-2eb9f374>}</span> <span class="token keyword" data-v-2eb9f374>from</span> <span class="token string" data-v-2eb9f374>'react'</span>

<span class="token keyword" data-v-2eb9f374>class</span> <span class="token class-name" data-v-2eb9f374>ClassComponent</span> <span class="token keyword" data-v-2eb9f374>extends</span> <span class="token class-name" data-v-2eb9f374>Component</span> <span class="token punctuation" data-v-2eb9f374>{</span>
  state <span class="token operator" data-v-2eb9f374>=</span> <span class="token punctuation" data-v-2eb9f374>{</span> number<span class="token operator" data-v-2eb9f374>:</span> <span class="token number" data-v-2eb9f374>0</span> <span class="token punctuation" data-v-2eb9f374>}</span>

  <span class="token function" data-v-2eb9f374>componentDidMount</span><span class="token punctuation" data-v-2eb9f374>(</span><span class="token punctuation" data-v-2eb9f374>)</span> <span class="token punctuation" data-v-2eb9f374>{</span>
    <span class="token keyword" data-v-2eb9f374>this</span><span class="token punctuation" data-v-2eb9f374>.</span><span class="token function" data-v-2eb9f374>setState</span><span class="token punctuation" data-v-2eb9f374>(</span><span class="token punctuation" data-v-2eb9f374>{</span> number<span class="token operator" data-v-2eb9f374>:</span> <span class="token number" data-v-2eb9f374>10</span> <span class="token punctuation" data-v-2eb9f374>}</span><span class="token punctuation" data-v-2eb9f374>)</span>
  <span class="token punctuation" data-v-2eb9f374>}</span>

  <span class="token function" data-v-2eb9f374>render</span><span class="token punctuation" data-v-2eb9f374>(</span><span class="token punctuation" data-v-2eb9f374>)</span> <span class="token punctuation" data-v-2eb9f374>{</span>
    <span class="token keyword" data-v-2eb9f374>const</span> <span class="token punctuation" data-v-2eb9f374>{</span> number <span class="token punctuation" data-v-2eb9f374>}</span> <span class="token operator" data-v-2eb9f374>=</span> <span class="token keyword" data-v-2eb9f374>this</span><span class="token punctuation" data-v-2eb9f374>.</span>state
    <span class="token keyword" data-v-2eb9f374>return</span> <span class="token punctuation" data-v-2eb9f374>(</span>
      <span class="token tag" data-v-2eb9f374><span class="token tag" data-v-2eb9f374><span class="token punctuation" data-v-2eb9f374>&lt;</span>div</span><span class="token punctuation" data-v-2eb9f374>&gt;</span></span><span class="token plain-text" data-v-2eb9f374>
        </span><span class="token tag" data-v-2eb9f374><span class="token tag" data-v-2eb9f374><span class="token punctuation" data-v-2eb9f374>&lt;</span>p</span><span class="token punctuation" data-v-2eb9f374>&gt;</span></span><span class="token plain-text" data-v-2eb9f374>Class Component!</span><span class="token tag" data-v-2eb9f374><span class="token tag" data-v-2eb9f374><span class="token punctuation" data-v-2eb9f374>&lt;/</span>p</span><span class="token punctuation" data-v-2eb9f374>&gt;</span></span><span class="token plain-text" data-v-2eb9f374>
        </span><span class="token tag" data-v-2eb9f374><span class="token tag" data-v-2eb9f374><span class="token punctuation" data-v-2eb9f374>&lt;</span>p</span><span class="token punctuation" data-v-2eb9f374>&gt;</span></span><span class="token plain-text" data-v-2eb9f374>State is </span><span class="token punctuation" data-v-2eb9f374>{</span>number<span class="token punctuation" data-v-2eb9f374>}</span><span class="token plain-text" data-v-2eb9f374>.</span><span class="token tag" data-v-2eb9f374><span class="token tag" data-v-2eb9f374><span class="token punctuation" data-v-2eb9f374>&lt;/</span>p</span><span class="token punctuation" data-v-2eb9f374>&gt;</span></span><span class="token plain-text" data-v-2eb9f374>
      </span><span class="token tag" data-v-2eb9f374><span class="token tag" data-v-2eb9f374><span class="token punctuation" data-v-2eb9f374>&lt;/</span>div</span><span class="token punctuation" data-v-2eb9f374>&gt;</span></span>
    <span class="token punctuation" data-v-2eb9f374>)</span>
  <span class="token punctuation" data-v-2eb9f374>}</span>
<span class="token punctuation" data-v-2eb9f374>}</span>

<span class="token keyword" data-v-2eb9f374>export</span> <span class="token keyword" data-v-2eb9f374>default</span> ClassComponent
</code></pre></div><div class="language-jsx extra-class" data-v-2eb9f374><pre class="language-jsx" data-v-2eb9f374><code data-v-2eb9f374><span class="token keyword" data-v-2eb9f374>import</span> React <span class="token keyword" data-v-2eb9f374>from</span> <span class="token string" data-v-2eb9f374>'react'</span>

<span class="token keyword" data-v-2eb9f374>const</span> <span class="token function-variable function" data-v-2eb9f374>FunctionalComponent</span> <span class="token operator" data-v-2eb9f374>=</span> <span class="token punctuation" data-v-2eb9f374>(</span><span class="token parameter" data-v-2eb9f374><span class="token punctuation" data-v-2eb9f374>{</span> number <span class="token operator" data-v-2eb9f374>=</span> <span class="token number" data-v-2eb9f374>10</span> <span class="token punctuation" data-v-2eb9f374>}</span></span><span class="token punctuation" data-v-2eb9f374>)</span> <span class="token operator" data-v-2eb9f374>=&gt;</span> <span class="token punctuation" data-v-2eb9f374>{</span>
  <span class="token keyword" data-v-2eb9f374>return</span> <span class="token punctuation" data-v-2eb9f374>(</span>
    <span class="token tag" data-v-2eb9f374><span class="token tag" data-v-2eb9f374><span class="token punctuation" data-v-2eb9f374>&lt;</span>div</span><span class="token punctuation" data-v-2eb9f374>&gt;</span></span><span class="token plain-text" data-v-2eb9f374>
      </span><span class="token tag" data-v-2eb9f374><span class="token tag" data-v-2eb9f374><span class="token punctuation" data-v-2eb9f374>&lt;</span>p</span><span class="token punctuation" data-v-2eb9f374>&gt;</span></span><span class="token plain-text" data-v-2eb9f374>Functional Component!</span><span class="token tag" data-v-2eb9f374><span class="token tag" data-v-2eb9f374><span class="token punctuation" data-v-2eb9f374>&lt;/</span>p</span><span class="token punctuation" data-v-2eb9f374>&gt;</span></span><span class="token plain-text" data-v-2eb9f374>
      </span><span class="token tag" data-v-2eb9f374><span class="token tag" data-v-2eb9f374><span class="token punctuation" data-v-2eb9f374>&lt;</span>p</span><span class="token punctuation" data-v-2eb9f374>&gt;</span></span><span class="token plain-text" data-v-2eb9f374>State is </span><span class="token punctuation" data-v-2eb9f374>{</span>number<span class="token punctuation" data-v-2eb9f374>}</span><span class="token plain-text" data-v-2eb9f374>.</span><span class="token tag" data-v-2eb9f374><span class="token tag" data-v-2eb9f374><span class="token punctuation" data-v-2eb9f374>&lt;/</span>p</span><span class="token punctuation" data-v-2eb9f374>&gt;</span></span><span class="token plain-text" data-v-2eb9f374>
    </span><span class="token tag" data-v-2eb9f374><span class="token tag" data-v-2eb9f374><span class="token punctuation" data-v-2eb9f374>&lt;/</span>div</span><span class="token punctuation" data-v-2eb9f374>&gt;</span></span>
  <span class="token punctuation" data-v-2eb9f374>)</span>
<span class="token punctuation" data-v-2eb9f374>}</span>

<span class="token keyword" data-v-2eb9f374>export</span> <span class="token keyword" data-v-2eb9f374>default</span> FunctionalComponent
</code></pre></div></div></div> <p data-v-2eb9f374>但是，钩子的灵活性太大，初学者不太容易理解。很多人一知半解，很容易写出混乱不堪、无法维护的代码。那就不如使用类了。因为类有很多强制的语法约束，不容易搞乱。</p> <h2 id="二、类和函数的差异" data-v-2eb9f374><a href="#二、类和函数的差异" class="header-anchor" data-v-2eb9f374>#</a> 二、类和函数的差异</h2> <p data-v-2eb9f374>严格地说，类组件和函数组件是有差异的。不同的写法，代表了不同的编程方法论。</p> <p data-v-2eb9f374><strong data-v-2eb9f374>类（class）是数据和逻辑的封装。</strong> 也就是说，组件的状态和操作方法是封装在一起的。如果选择了类的写法，就应该把相关的数据和操作，都写在同一个 class 里面。</p> <p data-v-2eb9f374><img src="https://www.wangbase.com/blogimg/asset/202009/bg2020091408.jpg" alt="img" data-v-2eb9f374></p> <p data-v-2eb9f374><strong data-v-2eb9f374>函数一般来说，只应该做一件事，就是返回一个值。</strong> 如果你有多个操作，每个操作应该写成一个单独的函数。而且，数据的状态应该与操作方法分离。根据这种理念，React 的函数组件只应该做一件事情：返回组件的 HTML 代码，而没有其他的功能。</p> <p data-v-2eb9f374><img src="https://www.wangbase.com/blogimg/asset/202009/bg2020091409.jpg" alt="img" data-v-2eb9f374></p> <p data-v-2eb9f374>还是以上面的函数组件为例。</p> <div class="language-jsx extra-class" data-v-2eb9f374><pre class="language-jsx" data-v-2eb9f374><code data-v-2eb9f374><span class="token keyword" data-v-2eb9f374>function</span> <span class="token function" data-v-2eb9f374>Welcome</span><span class="token punctuation" data-v-2eb9f374>(</span><span class="token parameter" data-v-2eb9f374>props</span><span class="token punctuation" data-v-2eb9f374>)</span> <span class="token punctuation" data-v-2eb9f374>{</span>
  <span class="token keyword" data-v-2eb9f374>return</span> <span class="token tag" data-v-2eb9f374><span class="token tag" data-v-2eb9f374><span class="token punctuation" data-v-2eb9f374>&lt;</span>h1</span><span class="token punctuation" data-v-2eb9f374>&gt;</span></span><span class="token plain-text" data-v-2eb9f374>Hello, </span><span class="token punctuation" data-v-2eb9f374>{</span>props<span class="token punctuation" data-v-2eb9f374>.</span>name<span class="token punctuation" data-v-2eb9f374>}</span><span class="token tag" data-v-2eb9f374><span class="token tag" data-v-2eb9f374><span class="token punctuation" data-v-2eb9f374>&lt;/</span>h1</span><span class="token punctuation" data-v-2eb9f374>&gt;</span></span><span class="token punctuation" data-v-2eb9f374>;</span>
<span class="token punctuation" data-v-2eb9f374>}</span>
</code></pre></div><p data-v-2eb9f374>这个函数只做一件事，就是根据输入的参数，返回组件的 HTML 代码。这种只进行单纯的数据计算（换算）的函数，在函数式编程里面称为 <strong data-v-2eb9f374>&quot;纯函数&quot;</strong>（pure function）。</p> <h2 id="三、副效应是什么" data-v-2eb9f374><a href="#三、副效应是什么" class="header-anchor" data-v-2eb9f374>#</a> 三、副效应是什么？</h2> <p data-v-2eb9f374>看到这里，你可能会产生一个疑问：如果纯函数只能进行数据计算，那些不涉及计算的操作（比如生成日志、储存数据、改变应用状态等等）应该写在哪里呢？</p> <p data-v-2eb9f374>函数式编程将那些跟数据计算无关的操作，都称为 &quot;副效应&quot; <strong data-v-2eb9f374>（side effect）</strong> 。如果函数内部直接包含产生副效应的操作，就不再是纯函数了，我们称之为不纯的函数。</p> <p data-v-2eb9f374><img src="https://www.wangbase.com/blogimg/asset/202009/bg2020091410.jpg" alt="img" data-v-2eb9f374></p> <p data-v-2eb9f374>纯函数内部只有通过间接的手段（即通过其他函数调用），才能包含副效应。</p> <h2 id="四、钩子-hook-的作用" data-v-2eb9f374><a href="#四、钩子-hook-的作用" class="header-anchor" data-v-2eb9f374>#</a> 四、钩子（hook）的作用</h2> <p data-v-2eb9f374>说了半天，那么钩子到底是什么？</p> <p data-v-2eb9f374>一句话，<strong data-v-2eb9f374>钩子（hook）就是 React 函数组件的副效应解决方案，用来为函数组件引入副效应。</strong> 函数组件的主体只应该用来返回组件的 HTML 代码，所有的其他操作（副效应）都必须通过钩子引入。</p> <p data-v-2eb9f374>由于副效应非常多，所以钩子有许多种。React 为许多常见的操作（副效应），都提供了专用的钩子。</p> <ul data-v-2eb9f374><li data-v-2eb9f374><code data-v-2eb9f374>useState()</code>：保存状态</li> <li data-v-2eb9f374><code data-v-2eb9f374>useContext()</code>：保存上下文</li> <li data-v-2eb9f374><code data-v-2eb9f374>useRef()</code>：保存引用</li> <li data-v-2eb9f374>......</li></ul> <p data-v-2eb9f374>上面这些钩子，都是引入某种特定的副效应，而 <strong data-v-2eb9f374><code data-v-2eb9f374>useEffect()</code>是通用的副效应钩子</strong> 。找不到对应的钩子时，就可以用它。其实，从名字也可以看出来，它跟副效应（side effect）直接相关。</p> <p data-v-2eb9f374><img src="https://www.wangbase.com/blogimg/asset/202009/bg2020091411.jpg" alt="img" data-v-2eb9f374></p> <h2 id="五、useeffect-的用法" data-v-2eb9f374><a href="#五、useeffect-的用法" class="header-anchor" data-v-2eb9f374>#</a> 五、useEffect() 的用法</h2> <p data-v-2eb9f374><code data-v-2eb9f374>useEffect()</code>本身是一个函数，由 React 框架提供，在函数组件内部调用即可。</p> <p data-v-2eb9f374>举例来说，我们希望组件加载以后，网页标题（<code data-v-2eb9f374>document.title</code>）会随之改变。那么，改变网页标题这个操作，就是组件的副效应，必须通过<code data-v-2eb9f374>useEffect()</code>来实现。</p> <div class="language-jsx extra-class" data-v-2eb9f374><pre class="language-jsx" data-v-2eb9f374><code data-v-2eb9f374><span class="token keyword" data-v-2eb9f374>import</span> React<span class="token punctuation" data-v-2eb9f374>,</span> <span class="token punctuation" data-v-2eb9f374>{</span> useEffect <span class="token punctuation" data-v-2eb9f374>}</span> <span class="token keyword" data-v-2eb9f374>from</span> <span class="token string" data-v-2eb9f374>'react'</span><span class="token punctuation" data-v-2eb9f374>;</span>

<span class="token keyword" data-v-2eb9f374>function</span> <span class="token function" data-v-2eb9f374>Welcome</span><span class="token punctuation" data-v-2eb9f374>(</span><span class="token parameter" data-v-2eb9f374>props</span><span class="token punctuation" data-v-2eb9f374>)</span> <span class="token punctuation" data-v-2eb9f374>{</span>
  <span class="token function" data-v-2eb9f374>useEffect</span><span class="token punctuation" data-v-2eb9f374>(</span><span class="token punctuation" data-v-2eb9f374>(</span><span class="token punctuation" data-v-2eb9f374>)</span> <span class="token operator" data-v-2eb9f374>=&gt;</span> <span class="token punctuation" data-v-2eb9f374>{</span>
    document<span class="token punctuation" data-v-2eb9f374>.</span>title <span class="token operator" data-v-2eb9f374>=</span> <span class="token string" data-v-2eb9f374>'加载完成'</span><span class="token punctuation" data-v-2eb9f374>;</span>
  <span class="token punctuation" data-v-2eb9f374>}</span><span class="token punctuation" data-v-2eb9f374>)</span><span class="token punctuation" data-v-2eb9f374>;</span>
  <span class="token keyword" data-v-2eb9f374>return</span> <span class="token tag" data-v-2eb9f374><span class="token tag" data-v-2eb9f374><span class="token punctuation" data-v-2eb9f374>&lt;</span>h1</span><span class="token punctuation" data-v-2eb9f374>&gt;</span></span><span class="token plain-text" data-v-2eb9f374>Hello, </span><span class="token punctuation" data-v-2eb9f374>{</span>props<span class="token punctuation" data-v-2eb9f374>.</span>name<span class="token punctuation" data-v-2eb9f374>}</span><span class="token tag" data-v-2eb9f374><span class="token tag" data-v-2eb9f374><span class="token punctuation" data-v-2eb9f374>&lt;/</span>h1</span><span class="token punctuation" data-v-2eb9f374>&gt;</span></span><span class="token punctuation" data-v-2eb9f374>;</span>
<span class="token punctuation" data-v-2eb9f374>}</span>
</code></pre></div><p data-v-2eb9f374>上面例子中，<code data-v-2eb9f374>useEffect()</code>的参数是一个函数，它就是所要完成的副效应（改变网页标题）。组件加载以后，React 就会执行这个函数。（<a href="https://codesandbox.io/s/interesting-dubinsky-dx6oq?file=/src/index.js" target="_blank" rel="noopener noreferrer" data-v-2eb9f374>查看运行结果<span data-v-2eb9f374><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>）</p> <p data-v-2eb9f374><code data-v-2eb9f374>useEffect()</code>的作用就是指定一个副效应函数，组件每渲染一次，该函数就自动执行一次。组件首次在网页 DOM 加载后，副效应函数也会执行。</p> <h2 id="六、useeffect-的第二个参数" data-v-2eb9f374><a href="#六、useeffect-的第二个参数" class="header-anchor" data-v-2eb9f374>#</a> 六、useEffect() 的第二个参数</h2> <p data-v-2eb9f374>有时候，我们不希望<code data-v-2eb9f374>useEffect()</code>每次渲染都执行，这时可以使用它的第二个参数，使用一个数组指定副效应函数的依赖项，只有依赖项发生变化，才会重新渲染。</p> <div class="language-jsx extra-class" data-v-2eb9f374><pre class="language-jsx" data-v-2eb9f374><code data-v-2eb9f374><span class="token keyword" data-v-2eb9f374>function</span> <span class="token function" data-v-2eb9f374>Welcome</span><span class="token punctuation" data-v-2eb9f374>(</span><span class="token parameter" data-v-2eb9f374>props</span><span class="token punctuation" data-v-2eb9f374>)</span> <span class="token punctuation" data-v-2eb9f374>{</span>
  <span class="token function" data-v-2eb9f374>useEffect</span><span class="token punctuation" data-v-2eb9f374>(</span><span class="token punctuation" data-v-2eb9f374>(</span><span class="token punctuation" data-v-2eb9f374>)</span> <span class="token operator" data-v-2eb9f374>=&gt;</span> <span class="token punctuation" data-v-2eb9f374>{</span>
    document<span class="token punctuation" data-v-2eb9f374>.</span>title <span class="token operator" data-v-2eb9f374>=</span> <span class="token template-string" data-v-2eb9f374><span class="token template-punctuation string" data-v-2eb9f374>`</span><span class="token string" data-v-2eb9f374>Hello, </span><span class="token interpolation" data-v-2eb9f374><span class="token interpolation-punctuation punctuation" data-v-2eb9f374>${</span>props<span class="token punctuation" data-v-2eb9f374>.</span>name<span class="token interpolation-punctuation punctuation" data-v-2eb9f374>}</span></span><span class="token template-punctuation string" data-v-2eb9f374>`</span></span><span class="token punctuation" data-v-2eb9f374>;</span>
  <span class="token punctuation" data-v-2eb9f374>}</span><span class="token punctuation" data-v-2eb9f374>,</span> <span class="token punctuation" data-v-2eb9f374>[</span>props<span class="token punctuation" data-v-2eb9f374>.</span>name<span class="token punctuation" data-v-2eb9f374>]</span><span class="token punctuation" data-v-2eb9f374>)</span><span class="token punctuation" data-v-2eb9f374>;</span>
  <span class="token keyword" data-v-2eb9f374>return</span> <span class="token tag" data-v-2eb9f374><span class="token tag" data-v-2eb9f374><span class="token punctuation" data-v-2eb9f374>&lt;</span>h1</span><span class="token punctuation" data-v-2eb9f374>&gt;</span></span><span class="token plain-text" data-v-2eb9f374>Hello, </span><span class="token punctuation" data-v-2eb9f374>{</span>props<span class="token punctuation" data-v-2eb9f374>.</span>name<span class="token punctuation" data-v-2eb9f374>}</span><span class="token tag" data-v-2eb9f374><span class="token tag" data-v-2eb9f374><span class="token punctuation" data-v-2eb9f374>&lt;/</span>h1</span><span class="token punctuation" data-v-2eb9f374>&gt;</span></span><span class="token punctuation" data-v-2eb9f374>;</span>
<span class="token punctuation" data-v-2eb9f374>}</span>
</code></pre></div><p data-v-2eb9f374>上面例子中，<code data-v-2eb9f374>useEffect()</code>的第二个参数是一个数组，指定了第一个参数（副效应函数）的依赖项（<code data-v-2eb9f374>props.name</code>）。只有该变量发生变化时，副效应函数才会执行。</p> <p data-v-2eb9f374>如果第二个参数是一个空数组，就表明副效应参数没有任何依赖项。因此，副效应函数这时只会在组件加载进入 DOM 后执行一次，后面组件重新渲染，就不会再次执行。这很合理，由于副效应不依赖任何变量，所以那些变量无论怎么变，副效应函数的执行结果都不会改变，所以运行一次就够了。</p> <h2 id="七、useeffect-的用途" data-v-2eb9f374><a href="#七、useeffect-的用途" class="header-anchor" data-v-2eb9f374>#</a> 七、useEffect() 的用途</h2> <p data-v-2eb9f374>只要是副效应，都可以使用<code data-v-2eb9f374>useEffect()</code>引入。它的常见用途有下面几种。</p> <ul data-v-2eb9f374><li data-v-2eb9f374>获取数据（data fetching）</li> <li data-v-2eb9f374>事件监听或订阅（setting up a subscription）</li> <li data-v-2eb9f374>改变 DOM（changing the DOM）</li> <li data-v-2eb9f374>输出日志（logging）</li></ul> <p data-v-2eb9f374>下面是从远程服务器获取数据的例子。（<a href="https://codesandbox.io/s/intelligent-yonath-olihz?file=/src/index.js" target="_blank" rel="noopener noreferrer" data-v-2eb9f374>查看运行结果<span data-v-2eb9f374><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>）</p> <div class="language-jsx extra-class" data-v-2eb9f374><pre class="language-jsx" data-v-2eb9f374><code data-v-2eb9f374><span class="token keyword" data-v-2eb9f374>import</span> React<span class="token punctuation" data-v-2eb9f374>,</span> <span class="token punctuation" data-v-2eb9f374>{</span> useState<span class="token punctuation" data-v-2eb9f374>,</span> useEffect <span class="token punctuation" data-v-2eb9f374>}</span> <span class="token keyword" data-v-2eb9f374>from</span> <span class="token string" data-v-2eb9f374>'react'</span><span class="token punctuation" data-v-2eb9f374>;</span>
<span class="token keyword" data-v-2eb9f374>import</span> axios <span class="token keyword" data-v-2eb9f374>from</span> <span class="token string" data-v-2eb9f374>'axios'</span><span class="token punctuation" data-v-2eb9f374>;</span>

<span class="token keyword" data-v-2eb9f374>function</span> <span class="token function" data-v-2eb9f374>App</span><span class="token punctuation" data-v-2eb9f374>(</span><span class="token punctuation" data-v-2eb9f374>)</span> <span class="token punctuation" data-v-2eb9f374>{</span>
  <span class="token keyword" data-v-2eb9f374>const</span> <span class="token punctuation" data-v-2eb9f374>[</span>data<span class="token punctuation" data-v-2eb9f374>,</span> setData<span class="token punctuation" data-v-2eb9f374>]</span> <span class="token operator" data-v-2eb9f374>=</span> <span class="token function" data-v-2eb9f374>useState</span><span class="token punctuation" data-v-2eb9f374>(</span><span class="token punctuation" data-v-2eb9f374>{</span> hits<span class="token operator" data-v-2eb9f374>:</span> <span class="token punctuation" data-v-2eb9f374>[</span><span class="token punctuation" data-v-2eb9f374>]</span> <span class="token punctuation" data-v-2eb9f374>}</span><span class="token punctuation" data-v-2eb9f374>)</span><span class="token punctuation" data-v-2eb9f374>;</span>

  <span class="token function" data-v-2eb9f374>useEffect</span><span class="token punctuation" data-v-2eb9f374>(</span><span class="token punctuation" data-v-2eb9f374>(</span><span class="token punctuation" data-v-2eb9f374>)</span> <span class="token operator" data-v-2eb9f374>=&gt;</span> <span class="token punctuation" data-v-2eb9f374>{</span>
    <span class="token keyword" data-v-2eb9f374>const</span> <span class="token function-variable function" data-v-2eb9f374>fetchData</span> <span class="token operator" data-v-2eb9f374>=</span> <span class="token keyword" data-v-2eb9f374>async</span> <span class="token punctuation" data-v-2eb9f374>(</span><span class="token punctuation" data-v-2eb9f374>)</span> <span class="token operator" data-v-2eb9f374>=&gt;</span> <span class="token punctuation" data-v-2eb9f374>{</span>
      <span class="token keyword" data-v-2eb9f374>const</span> result <span class="token operator" data-v-2eb9f374>=</span> <span class="token keyword" data-v-2eb9f374>await</span> <span class="token function" data-v-2eb9f374>axios</span><span class="token punctuation" data-v-2eb9f374>(</span>
        <span class="token string" data-v-2eb9f374>'https://hn.algolia.com/api/v1/search?query=redux'</span><span class="token punctuation" data-v-2eb9f374>,</span>
      <span class="token punctuation" data-v-2eb9f374>)</span><span class="token punctuation" data-v-2eb9f374>;</span>

      <span class="token function" data-v-2eb9f374>setData</span><span class="token punctuation" data-v-2eb9f374>(</span>result<span class="token punctuation" data-v-2eb9f374>.</span>data<span class="token punctuation" data-v-2eb9f374>)</span><span class="token punctuation" data-v-2eb9f374>;</span>
    <span class="token punctuation" data-v-2eb9f374>}</span><span class="token punctuation" data-v-2eb9f374>;</span>

    <span class="token function" data-v-2eb9f374>fetchData</span><span class="token punctuation" data-v-2eb9f374>(</span><span class="token punctuation" data-v-2eb9f374>)</span><span class="token punctuation" data-v-2eb9f374>;</span>
  <span class="token punctuation" data-v-2eb9f374>}</span><span class="token punctuation" data-v-2eb9f374>,</span> <span class="token punctuation" data-v-2eb9f374>[</span><span class="token punctuation" data-v-2eb9f374>]</span><span class="token punctuation" data-v-2eb9f374>)</span><span class="token punctuation" data-v-2eb9f374>;</span>

  <span class="token keyword" data-v-2eb9f374>return</span> <span class="token punctuation" data-v-2eb9f374>(</span>
    <span class="token tag" data-v-2eb9f374><span class="token tag" data-v-2eb9f374><span class="token punctuation" data-v-2eb9f374>&lt;</span>ul</span><span class="token punctuation" data-v-2eb9f374>&gt;</span></span><span class="token plain-text" data-v-2eb9f374>
      </span><span class="token punctuation" data-v-2eb9f374>{</span>data<span class="token punctuation" data-v-2eb9f374>.</span>hits<span class="token punctuation" data-v-2eb9f374>.</span><span class="token function" data-v-2eb9f374>map</span><span class="token punctuation" data-v-2eb9f374>(</span><span class="token parameter" data-v-2eb9f374>item</span> <span class="token operator" data-v-2eb9f374>=&gt;</span> <span class="token punctuation" data-v-2eb9f374>(</span>
        <span class="token tag" data-v-2eb9f374><span class="token tag" data-v-2eb9f374><span class="token punctuation" data-v-2eb9f374>&lt;</span>li</span> <span class="token attr-name" data-v-2eb9f374>key</span><span class="token script language-javascript" data-v-2eb9f374><span class="token script-punctuation punctuation" data-v-2eb9f374>=</span><span class="token punctuation" data-v-2eb9f374>{</span>item<span class="token punctuation" data-v-2eb9f374>.</span>objectID<span class="token punctuation" data-v-2eb9f374>}</span></span><span class="token punctuation" data-v-2eb9f374>&gt;</span></span><span class="token plain-text" data-v-2eb9f374>
          </span><span class="token tag" data-v-2eb9f374><span class="token tag" data-v-2eb9f374><span class="token punctuation" data-v-2eb9f374>&lt;</span>a</span> <span class="token attr-name" data-v-2eb9f374>href</span><span class="token script language-javascript" data-v-2eb9f374><span class="token script-punctuation punctuation" data-v-2eb9f374>=</span><span class="token punctuation" data-v-2eb9f374>{</span>item<span class="token punctuation" data-v-2eb9f374>.</span>url<span class="token punctuation" data-v-2eb9f374>}</span></span><span class="token punctuation" data-v-2eb9f374>&gt;</span></span><span class="token punctuation" data-v-2eb9f374>{</span>item<span class="token punctuation" data-v-2eb9f374>.</span>title<span class="token punctuation" data-v-2eb9f374>}</span><span class="token tag" data-v-2eb9f374><span class="token tag" data-v-2eb9f374><span class="token punctuation" data-v-2eb9f374>&lt;/</span>a</span><span class="token punctuation" data-v-2eb9f374>&gt;</span></span><span class="token plain-text" data-v-2eb9f374>
        </span><span class="token tag" data-v-2eb9f374><span class="token tag" data-v-2eb9f374><span class="token punctuation" data-v-2eb9f374>&lt;/</span>li</span><span class="token punctuation" data-v-2eb9f374>&gt;</span></span>
      <span class="token punctuation" data-v-2eb9f374>)</span><span class="token punctuation" data-v-2eb9f374>)</span><span class="token punctuation" data-v-2eb9f374>}</span><span class="token plain-text" data-v-2eb9f374>
    </span><span class="token tag" data-v-2eb9f374><span class="token tag" data-v-2eb9f374><span class="token punctuation" data-v-2eb9f374>&lt;/</span>ul</span><span class="token punctuation" data-v-2eb9f374>&gt;</span></span>
  <span class="token punctuation" data-v-2eb9f374>)</span><span class="token punctuation" data-v-2eb9f374>;</span>
<span class="token punctuation" data-v-2eb9f374>}</span>

<span class="token keyword" data-v-2eb9f374>export</span> <span class="token keyword" data-v-2eb9f374>default</span> App<span class="token punctuation" data-v-2eb9f374>;</span>
</code></pre></div><p data-v-2eb9f374>上面例子中，<code data-v-2eb9f374>useState()</code>用来生成一个状态变量（<code data-v-2eb9f374>data</code>），保存获取的数据；<code data-v-2eb9f374>useEffect()</code>的副效应函数内部有一个 async 函数，用来从服务器异步获取数据。拿到数据以后，再用<code data-v-2eb9f374>setData()</code>触发组件的重新渲染。</p> <p data-v-2eb9f374>由于获取数据只需要执行一次，所以上例的<code data-v-2eb9f374>useEffect()</code>的第二个参数为一个空数组。</p> <h2 id="八、useeffect-的返回值" data-v-2eb9f374><a href="#八、useeffect-的返回值" class="header-anchor" data-v-2eb9f374>#</a> 八、useEffect() 的返回值</h2> <p data-v-2eb9f374>副效应是随着组件加载而发生的，那么组件卸载时，可能需要清理这些副效应。</p> <p data-v-2eb9f374><code data-v-2eb9f374>useEffect()</code>允许返回一个函数，在组件卸载时，执行该函数，清理副效应。如果不需要清理副效应，<code data-v-2eb9f374>useEffect()</code>就不用返回任何值。</p> <div class="language-jsx extra-class" data-v-2eb9f374><pre class="language-jsx" data-v-2eb9f374><code data-v-2eb9f374><span class="token function" data-v-2eb9f374>useEffect</span><span class="token punctuation" data-v-2eb9f374>(</span><span class="token punctuation" data-v-2eb9f374>(</span><span class="token punctuation" data-v-2eb9f374>)</span> <span class="token operator" data-v-2eb9f374>=&gt;</span> <span class="token punctuation" data-v-2eb9f374>{</span>
  <span class="token keyword" data-v-2eb9f374>const</span> subscription <span class="token operator" data-v-2eb9f374>=</span> props<span class="token punctuation" data-v-2eb9f374>.</span>source<span class="token punctuation" data-v-2eb9f374>.</span><span class="token function" data-v-2eb9f374>subscribe</span><span class="token punctuation" data-v-2eb9f374>(</span><span class="token punctuation" data-v-2eb9f374>)</span><span class="token punctuation" data-v-2eb9f374>;</span>
  <span class="token keyword" data-v-2eb9f374>return</span> <span class="token punctuation" data-v-2eb9f374>(</span><span class="token punctuation" data-v-2eb9f374>)</span> <span class="token operator" data-v-2eb9f374>=&gt;</span> <span class="token punctuation" data-v-2eb9f374>{</span>
    subscription<span class="token punctuation" data-v-2eb9f374>.</span><span class="token function" data-v-2eb9f374>unsubscribe</span><span class="token punctuation" data-v-2eb9f374>(</span><span class="token punctuation" data-v-2eb9f374>)</span><span class="token punctuation" data-v-2eb9f374>;</span>
  <span class="token punctuation" data-v-2eb9f374>}</span><span class="token punctuation" data-v-2eb9f374>;</span>
<span class="token punctuation" data-v-2eb9f374>}</span><span class="token punctuation" data-v-2eb9f374>,</span> <span class="token punctuation" data-v-2eb9f374>[</span>props<span class="token punctuation" data-v-2eb9f374>.</span>source<span class="token punctuation" data-v-2eb9f374>]</span><span class="token punctuation" data-v-2eb9f374>)</span><span class="token punctuation" data-v-2eb9f374>;</span>
</code></pre></div><p data-v-2eb9f374>上面例子中，<code data-v-2eb9f374>useEffect()</code>在组件加载时订阅了一个事件，并且返回一个清理函数，在组件卸载时取消订阅。</p> <p data-v-2eb9f374>实际使用中，由于副效应函数默认是每次渲染都会执行，所以清理函数不仅会在组件卸载时执行一次，每次副效应函数重新执行之前，也会执行一次，用来清理上一次渲染的副效应。</p> <h2 id="九、useeffect-的注意点" data-v-2eb9f374><a href="#九、useeffect-的注意点" class="header-anchor" data-v-2eb9f374>#</a> 九、useEffect() 的注意点</h2> <p data-v-2eb9f374>使用<code data-v-2eb9f374>useEffect()</code>时，有一点需要注意。如果有多个副效应，应该调用多个<code data-v-2eb9f374>useEffect()</code>，而不应该合并写在一起。</p> <div class="language-jsx extra-class" data-v-2eb9f374><pre class="language-jsx" data-v-2eb9f374><code data-v-2eb9f374><span class="token keyword" data-v-2eb9f374>function</span> <span class="token function" data-v-2eb9f374>App</span><span class="token punctuation" data-v-2eb9f374>(</span><span class="token punctuation" data-v-2eb9f374>)</span> <span class="token punctuation" data-v-2eb9f374>{</span>
  <span class="token keyword" data-v-2eb9f374>const</span> <span class="token punctuation" data-v-2eb9f374>[</span>varA<span class="token punctuation" data-v-2eb9f374>,</span> setVarA<span class="token punctuation" data-v-2eb9f374>]</span> <span class="token operator" data-v-2eb9f374>=</span> <span class="token function" data-v-2eb9f374>useState</span><span class="token punctuation" data-v-2eb9f374>(</span><span class="token number" data-v-2eb9f374>0</span><span class="token punctuation" data-v-2eb9f374>)</span><span class="token punctuation" data-v-2eb9f374>;</span>
  <span class="token keyword" data-v-2eb9f374>const</span> <span class="token punctuation" data-v-2eb9f374>[</span>varB<span class="token punctuation" data-v-2eb9f374>,</span> setVarB<span class="token punctuation" data-v-2eb9f374>]</span> <span class="token operator" data-v-2eb9f374>=</span> <span class="token function" data-v-2eb9f374>useState</span><span class="token punctuation" data-v-2eb9f374>(</span><span class="token number" data-v-2eb9f374>0</span><span class="token punctuation" data-v-2eb9f374>)</span><span class="token punctuation" data-v-2eb9f374>;</span>
  <span class="token function" data-v-2eb9f374>useEffect</span><span class="token punctuation" data-v-2eb9f374>(</span><span class="token punctuation" data-v-2eb9f374>(</span><span class="token punctuation" data-v-2eb9f374>)</span> <span class="token operator" data-v-2eb9f374>=&gt;</span> <span class="token punctuation" data-v-2eb9f374>{</span>
    <span class="token keyword" data-v-2eb9f374>const</span> timeoutA <span class="token operator" data-v-2eb9f374>=</span> <span class="token function" data-v-2eb9f374>setTimeout</span><span class="token punctuation" data-v-2eb9f374>(</span><span class="token punctuation" data-v-2eb9f374>(</span><span class="token punctuation" data-v-2eb9f374>)</span> <span class="token operator" data-v-2eb9f374>=&gt;</span> <span class="token function" data-v-2eb9f374>setVarA</span><span class="token punctuation" data-v-2eb9f374>(</span>varA <span class="token operator" data-v-2eb9f374>+</span> <span class="token number" data-v-2eb9f374>1</span><span class="token punctuation" data-v-2eb9f374>)</span><span class="token punctuation" data-v-2eb9f374>,</span> <span class="token number" data-v-2eb9f374>1000</span><span class="token punctuation" data-v-2eb9f374>)</span><span class="token punctuation" data-v-2eb9f374>;</span>
    <span class="token keyword" data-v-2eb9f374>const</span> timeoutB <span class="token operator" data-v-2eb9f374>=</span> <span class="token function" data-v-2eb9f374>setTimeout</span><span class="token punctuation" data-v-2eb9f374>(</span><span class="token punctuation" data-v-2eb9f374>(</span><span class="token punctuation" data-v-2eb9f374>)</span> <span class="token operator" data-v-2eb9f374>=&gt;</span> <span class="token function" data-v-2eb9f374>setVarB</span><span class="token punctuation" data-v-2eb9f374>(</span>varB <span class="token operator" data-v-2eb9f374>+</span> <span class="token number" data-v-2eb9f374>2</span><span class="token punctuation" data-v-2eb9f374>)</span><span class="token punctuation" data-v-2eb9f374>,</span> <span class="token number" data-v-2eb9f374>2000</span><span class="token punctuation" data-v-2eb9f374>)</span><span class="token punctuation" data-v-2eb9f374>;</span>

    <span class="token keyword" data-v-2eb9f374>return</span> <span class="token punctuation" data-v-2eb9f374>(</span><span class="token punctuation" data-v-2eb9f374>)</span> <span class="token operator" data-v-2eb9f374>=&gt;</span> <span class="token punctuation" data-v-2eb9f374>{</span>
      <span class="token function" data-v-2eb9f374>clearTimeout</span><span class="token punctuation" data-v-2eb9f374>(</span>timeoutA<span class="token punctuation" data-v-2eb9f374>)</span><span class="token punctuation" data-v-2eb9f374>;</span>
      <span class="token function" data-v-2eb9f374>clearTimeout</span><span class="token punctuation" data-v-2eb9f374>(</span>timeoutB<span class="token punctuation" data-v-2eb9f374>)</span><span class="token punctuation" data-v-2eb9f374>;</span>
    <span class="token punctuation" data-v-2eb9f374>}</span><span class="token punctuation" data-v-2eb9f374>;</span>
  <span class="token punctuation" data-v-2eb9f374>}</span><span class="token punctuation" data-v-2eb9f374>,</span> <span class="token punctuation" data-v-2eb9f374>[</span>varA<span class="token punctuation" data-v-2eb9f374>,</span> varB<span class="token punctuation" data-v-2eb9f374>]</span><span class="token punctuation" data-v-2eb9f374>)</span><span class="token punctuation" data-v-2eb9f374>;</span>

  <span class="token keyword" data-v-2eb9f374>return</span> <span class="token tag" data-v-2eb9f374><span class="token tag" data-v-2eb9f374><span class="token punctuation" data-v-2eb9f374>&lt;</span>span</span><span class="token punctuation" data-v-2eb9f374>&gt;</span></span><span class="token punctuation" data-v-2eb9f374>{</span>varA<span class="token punctuation" data-v-2eb9f374>}</span><span class="token plain-text" data-v-2eb9f374>, </span><span class="token punctuation" data-v-2eb9f374>{</span>varB<span class="token punctuation" data-v-2eb9f374>}</span><span class="token tag" data-v-2eb9f374><span class="token tag" data-v-2eb9f374><span class="token punctuation" data-v-2eb9f374>&lt;/</span>span</span><span class="token punctuation" data-v-2eb9f374>&gt;</span></span><span class="token punctuation" data-v-2eb9f374>;</span>
<span class="token punctuation" data-v-2eb9f374>}</span>
</code></pre></div><p data-v-2eb9f374>上面的例子是错误的写法，副效应函数里面有两个定时器，它们之间并没有关系，其实是两个不相关的副效应，不应该写在一起。正确的写法是将它们分开写成两个<code data-v-2eb9f374>useEffect()</code>。</p> <div class="language-jsx extra-class" data-v-2eb9f374><pre class="language-jsx" data-v-2eb9f374><code data-v-2eb9f374><span class="token keyword" data-v-2eb9f374>function</span> <span class="token function" data-v-2eb9f374>App</span><span class="token punctuation" data-v-2eb9f374>(</span><span class="token punctuation" data-v-2eb9f374>)</span> <span class="token punctuation" data-v-2eb9f374>{</span>
  <span class="token keyword" data-v-2eb9f374>const</span> <span class="token punctuation" data-v-2eb9f374>[</span>varA<span class="token punctuation" data-v-2eb9f374>,</span> setVarA<span class="token punctuation" data-v-2eb9f374>]</span> <span class="token operator" data-v-2eb9f374>=</span> <span class="token function" data-v-2eb9f374>useState</span><span class="token punctuation" data-v-2eb9f374>(</span><span class="token number" data-v-2eb9f374>0</span><span class="token punctuation" data-v-2eb9f374>)</span><span class="token punctuation" data-v-2eb9f374>;</span>
  <span class="token keyword" data-v-2eb9f374>const</span> <span class="token punctuation" data-v-2eb9f374>[</span>varB<span class="token punctuation" data-v-2eb9f374>,</span> setVarB<span class="token punctuation" data-v-2eb9f374>]</span> <span class="token operator" data-v-2eb9f374>=</span> <span class="token function" data-v-2eb9f374>useState</span><span class="token punctuation" data-v-2eb9f374>(</span><span class="token number" data-v-2eb9f374>0</span><span class="token punctuation" data-v-2eb9f374>)</span><span class="token punctuation" data-v-2eb9f374>;</span>

  <span class="token function" data-v-2eb9f374>useEffect</span><span class="token punctuation" data-v-2eb9f374>(</span><span class="token punctuation" data-v-2eb9f374>(</span><span class="token punctuation" data-v-2eb9f374>)</span> <span class="token operator" data-v-2eb9f374>=&gt;</span> <span class="token punctuation" data-v-2eb9f374>{</span>
    <span class="token keyword" data-v-2eb9f374>const</span> timeout <span class="token operator" data-v-2eb9f374>=</span> <span class="token function" data-v-2eb9f374>setTimeout</span><span class="token punctuation" data-v-2eb9f374>(</span><span class="token punctuation" data-v-2eb9f374>(</span><span class="token punctuation" data-v-2eb9f374>)</span> <span class="token operator" data-v-2eb9f374>=&gt;</span> <span class="token function" data-v-2eb9f374>setVarA</span><span class="token punctuation" data-v-2eb9f374>(</span>varA <span class="token operator" data-v-2eb9f374>+</span> <span class="token number" data-v-2eb9f374>1</span><span class="token punctuation" data-v-2eb9f374>)</span><span class="token punctuation" data-v-2eb9f374>,</span> <span class="token number" data-v-2eb9f374>1000</span><span class="token punctuation" data-v-2eb9f374>)</span><span class="token punctuation" data-v-2eb9f374>;</span>
    <span class="token keyword" data-v-2eb9f374>return</span> <span class="token punctuation" data-v-2eb9f374>(</span><span class="token punctuation" data-v-2eb9f374>)</span> <span class="token operator" data-v-2eb9f374>=&gt;</span> <span class="token function" data-v-2eb9f374>clearTimeout</span><span class="token punctuation" data-v-2eb9f374>(</span>timeout<span class="token punctuation" data-v-2eb9f374>)</span><span class="token punctuation" data-v-2eb9f374>;</span>
  <span class="token punctuation" data-v-2eb9f374>}</span><span class="token punctuation" data-v-2eb9f374>,</span> <span class="token punctuation" data-v-2eb9f374>[</span>varA<span class="token punctuation" data-v-2eb9f374>]</span><span class="token punctuation" data-v-2eb9f374>)</span><span class="token punctuation" data-v-2eb9f374>;</span>

  <span class="token function" data-v-2eb9f374>useEffect</span><span class="token punctuation" data-v-2eb9f374>(</span><span class="token punctuation" data-v-2eb9f374>(</span><span class="token punctuation" data-v-2eb9f374>)</span> <span class="token operator" data-v-2eb9f374>=&gt;</span> <span class="token punctuation" data-v-2eb9f374>{</span>
    <span class="token keyword" data-v-2eb9f374>const</span> timeout <span class="token operator" data-v-2eb9f374>=</span> <span class="token function" data-v-2eb9f374>setTimeout</span><span class="token punctuation" data-v-2eb9f374>(</span><span class="token punctuation" data-v-2eb9f374>(</span><span class="token punctuation" data-v-2eb9f374>)</span> <span class="token operator" data-v-2eb9f374>=&gt;</span> <span class="token function" data-v-2eb9f374>setVarB</span><span class="token punctuation" data-v-2eb9f374>(</span>varB <span class="token operator" data-v-2eb9f374>+</span> <span class="token number" data-v-2eb9f374>2</span><span class="token punctuation" data-v-2eb9f374>)</span><span class="token punctuation" data-v-2eb9f374>,</span> <span class="token number" data-v-2eb9f374>2000</span><span class="token punctuation" data-v-2eb9f374>)</span><span class="token punctuation" data-v-2eb9f374>;</span>

    <span class="token keyword" data-v-2eb9f374>return</span> <span class="token punctuation" data-v-2eb9f374>(</span><span class="token punctuation" data-v-2eb9f374>)</span> <span class="token operator" data-v-2eb9f374>=&gt;</span> <span class="token function" data-v-2eb9f374>clearTimeout</span><span class="token punctuation" data-v-2eb9f374>(</span>timeout<span class="token punctuation" data-v-2eb9f374>)</span><span class="token punctuation" data-v-2eb9f374>;</span>
  <span class="token punctuation" data-v-2eb9f374>}</span><span class="token punctuation" data-v-2eb9f374>,</span> <span class="token punctuation" data-v-2eb9f374>[</span>varB<span class="token punctuation" data-v-2eb9f374>]</span><span class="token punctuation" data-v-2eb9f374>)</span><span class="token punctuation" data-v-2eb9f374>;</span>

  <span class="token keyword" data-v-2eb9f374>return</span> <span class="token tag" data-v-2eb9f374><span class="token tag" data-v-2eb9f374><span class="token punctuation" data-v-2eb9f374>&lt;</span>span</span><span class="token punctuation" data-v-2eb9f374>&gt;</span></span><span class="token punctuation" data-v-2eb9f374>{</span>varA<span class="token punctuation" data-v-2eb9f374>}</span><span class="token plain-text" data-v-2eb9f374>, </span><span class="token punctuation" data-v-2eb9f374>{</span>varB<span class="token punctuation" data-v-2eb9f374>}</span><span class="token tag" data-v-2eb9f374><span class="token tag" data-v-2eb9f374><span class="token punctuation" data-v-2eb9f374>&lt;/</span>span</span><span class="token punctuation" data-v-2eb9f374>&gt;</span></span><span class="token punctuation" data-v-2eb9f374>;</span>
<span class="token punctuation" data-v-2eb9f374>}</span>
</code></pre></div><h2 id="十、参考链接" data-v-2eb9f374><a href="#十、参考链接" class="header-anchor" data-v-2eb9f374>#</a> 十、参考链接</h2> <ul data-v-2eb9f374><li data-v-2eb9f374><a href="https://medium.com/swlh/useeffect-4-tips-every-developer-should-know-54b188b14d9c" target="_blank" rel="noopener noreferrer" data-v-2eb9f374>React useEffect: 4 Tips Every Developer Should Know<span data-v-2eb9f374><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, Helder Esteves</li> <li data-v-2eb9f374><a href="https://reactjs.org/docs/hooks-effect.html" target="_blank" rel="noopener noreferrer" data-v-2eb9f374>Using the Effect Hook<span data-v-2eb9f374><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, React</li> <li data-v-2eb9f374><a href="https://www.robinwieruch.de/react-hooks-fetch-data" target="_blank" rel="noopener noreferrer" data-v-2eb9f374>How to fetch data with React Hooks?<span data-v-2eb9f374><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, Robin Wieruch</li></ul> <p data-v-2eb9f374>（正文完）</p> <h2 data-v-2eb9f374>文档信息</h2> <blockquote data-v-2eb9f374><ul data-v-2eb9f374><li data-v-2eb9f374>原文地址：<a href="http://www.ruanyifeng.com/blog/2020/09/react-hooks-useeffect-tutorial.html" target="_blank" rel="noopener noreferrer" data-v-2eb9f374>轻松学会 React 钩子：以 useEffect() 为例<span data-v-2eb9f374><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li data-v-2eb9f374>发表日期：2020年9月15日</li></ul></blockquote></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2021-02-06 12:55</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev"><svg aria-hidden="true" class="icon inner-svg"><use xlink:href="#icon-bold-left"></use></svg> <a href="/store/react/react-hooks.html" class="prev">React Hooks 入门教程</a></span> <span class="next"><a href="/store/react/react-router.html">React Router 使用教程</a> <svg aria-hidden="true" class="icon inner-svg"><use xlink:href="#icon-bold-right"></use></svg></span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/store/assets/js/app.394edd4d.js" defer></script><script src="/store/assets/js/2.47c138cf.js" defer></script><script src="/store/assets/js/9.2072f0c5.js" defer></script>
  </body>
</html>
